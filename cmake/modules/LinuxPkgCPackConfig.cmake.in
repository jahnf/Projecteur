# CPackConfig for Linux packages
set(CPACK_GENERATOR "@PKG_TYPE@")
set(CPACK_PACKAGING_INSTALL_PREFIX "@CMAKE_INSTALL_PREFIX@")
set(CPACK_CMAKE_GENERATOR "@CMAKE_GENERATOR@")
set(CPACK_PACKAGE_NAME "@PKG_NAME@")
set(CPACK_STRIP_FILES ON)

set(CPACK_PACKAGE_CONTACT "@PKG_CONTACT@")
set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "@PKG_DESCRIPTION_BRIEF@")
set(CPACK_PACKAGE_DESCRIPTION "@PKG_DESCRIPTION_FULL@")

set(CPACK_PACKAGE_VERSION @PKG_VERSION_STRING_FULL@)
set(CPACK_PACKAGE_VERSION_MAJOR @PKG_VERSION_MAJOR@)
set(CPACK_PACKAGE_VERSION_MINOR @PKG_VERSION_MINOR@)
set(CPACK_PACKAGE_VERSION_PATCH @PKG_VERSION_PATCH@)

set(CPACK_INSTALL_CMAKE_PROJECTS "@CMAKE_CURRENT_BINARY_DIR@;@PKG_PROJECT@;ALL;.")
set(CPACK_PACKAGE_FILE_NAME "@PKG_CPACK_PKG_FILENAME@")
set(CPACK_OUTPUT_FILE_PREFIX "@PKG_CPACK_PKG_FILE_PREFIX@")

set(CPACK_DEBIAN_PACKAGE_NAME "${CPACK_PACKAGE_NAME}")
set(CPACK_RPM_PACKAGE_NAME "${CPACK_PACKAGE_NAME}")
set(CPACK_RPM_COMPRESSION_TYPE gzip)
set(CPACK_DEBIAN_PACKAGE_VERSION "@PKG_VERSION_STRING_BASE@")
set(CPACK_DEBIAN_PACKAGE_RELEASE "@PKG_VERSION_IDENTIFIERS@")
set(CPACK_RPM_PACKAGE_VERSION "@PKG_VERSION_STRING_BASE@")
set(CPACK_RPM_PACKAGE_RELEASE "@PKG_VERSION_IDENTIFIERS@")
set(CPACK_RPM_PACKAGE_LICENSE "@PKG_LICENSE@")
set(CPACK_RPM_PACKAGE_DESCRIPTION "@PKG_DESCRIPTION_FULL@")
set(CPACK_RPM_PACKAGE_AUTOPROV 1)
set(CPACK_RPM_PACKAGE_AUTOREQ 1)
set(CPACK_RPM_EXCLUDE_FROM_AUTO_FILELIST_ADDITION
  "@CMAKE_INSTALL_PREFIX@"
  "@CMAKE_INSTALL_PREFIX@/bin"
  "@CMAKE_INSTALL_PREFIX@/share"
  "@CMAKE_INSTALL_PREFIX@/share/applications"
  "@CMAKE_INSTALL_PREFIX@/share/man"
  "@CMAKE_INSTALL_PREFIX@/share/man/man1"
  "@CMAKE_INSTALL_UDEVDIR@"
  "@CMAKE_INSTALL_UDEVRULESDIR@"
)

# Other settings
set(CPACK_DEBIAN_PACKAGE_HOMEPAGE "@PKG_HOMEPAGE@")
set(CPACK_DEBIAN_PACKAGE_SECTION "@PKG_DEBIAN_SECTION@")

# Set requires/depends
set(CPACK_RPM_PACKAGE_REQUIRES "@PKG_DEPENDENCIES@")
set(CPACK_DEBIAN_PACKAGE_DEPENDS "@PKG_DEPENDENCIES@")

# Post and Pre-install actions if necessary
set(CPACK_RPM_PRE_INSTALL_SCRIPT_FILE "@PKG_PREINST_SCRIPT@")
set(CPACK_RPM_POST_INSTALL_SCRIPT_FILE "@PKG_POSTINST_SCRIPT@")
set(CPACK_RPM_PRE_UNINSTALL_SCRIPT_FILE "@PKG_PRERM_SCRIPT@")
set(CPACK_RPM_POST_UNINSTALL_SCRIPT_FILE "@PKG_POSTRM_SCRIPT@")

foreach(script CPACK_RPM_PRE_INSTALL_SCRIPT_FILE
               CPACK_RPM_POST_INSTALL_SCRIPT_FILE
               CPACK_RPM_PRE_UNINSTALL_SCRIPT_FILE
               CPACK_RPM_POST_UNINSTALL_SCRIPT_FILE)
  if(NOT "${${script}}" STREQUAL "")
    list(APPEND PKG_DEBIAN_CTRL_EXTRA "${${script}}")
  endif()
endforeach()

list(LENGTH PKG_DEBIAN_CTRL_EXTRA NUM_PKG_CTRL_SCRIPTS)
set(CPACK_DEBIAN_PACKAGE_CONTROL_STRICT_PERMISSION TRUE)
if(NUM_PKG_CTRL_SCRIPTS)
  set(CPACK_DEBIAN_PACKAGE_CONTROL_EXTRA "${PKG_DEBIAN_CTRL_EXTRA}")
endif()

